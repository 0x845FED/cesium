<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">  <!-- Use Chrome Frame in IE -->
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>Cesium Demo</title>
    <script>
    if (window.location.protocol === 'file:') {
        if (confirm("You must host this app on a web server.\nSee contributor's guide for more info?")) {
            window.location = 'https://github.com/AnalyticalGraphicsInc/cesium/wiki/Contributor%27s-Guide';
        }
    }
    </script>
    <script data-dojo-config="async: 1, tlmSiblingOfDojo: 0" src="../../../ThirdParty/dojo-release-1.7.2-src/dojo/dojo.js"></script>
    <link rel="Stylesheet" href="../../../ThirdParty/dojo-release-1.7.2-src/dijit/themes/claro/claro.css" type="text/css">
</head>
<body class="claro">
<style>
body {
    background: #000;
    color: #eee;
    font-family: sans-serif;
    font-size: 9pt;
    padding: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
}
.fullSize {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    border: none;
    width: 100%;
    height: 100%;
    z-index: -1;
}
</style>

<div id="cesiumContainer" class="fullSize"></div>

<script id="cesium_sandcastle_script">
/*global require,document,window,console,Sandcastle*/
require({
    baseUrl : '../../../Source'
}, [
    'Cesium'
], function (
    Cesium
) {
    "use strict";

    var canvas = document.createElement('canvas');
    canvas.className = "fullSize";
    document.getElementById('cesiumContainer').appendChild(canvas);
    var ellipsoid = Cesium.Ellipsoid.WGS84;
    var scene = new Cesium.Scene(canvas);
    var primitives = scene.getPrimitives();

    // Bing Maps
    var bing = new Cesium.BingMapsTileProvider({
        server : 'dev.virtualearth.net',
        mapStyle : Cesium.BingMapsStyle.AERIAL,
        // Some versions of Safari support WebGL, but don't correctly implement
        // cross-origin image loading, so we need to load Bing imagery using a proxy.
        proxy : Cesium.FeatureDetection.supportsCrossOriginImagery() ? undefined : new Cesium.DefaultProxy('/proxy/')
    });

    var cb = new Cesium.CentralBody(ellipsoid);
    cb.dayTileProvider = bing;
    cb.nightImageSource = '../../../Images/land_ocean_ice_lights_2048.jpg';
    cb.specularMapSource = '../../../Images/earthspec1k.jpg';
    cb.showSkyAtmosphere = true;
    cb.showGroundAtmosphere = true;
    primitives.setCentralBody(cb);

    scene.getCamera().getControllers().addCentralBody();

    ///////////////////////////////////////////////////////////////////////////
    // Circles & Ellipses examples

    // Fill circle
    var circle = new Cesium.Polygon();
    Sandcastle.declare(circle);
    circle.setPositions(Cesium.Shapes.computeCircleBoundary(
        ellipsoid, ellipsoid.cartographicDegreesToCartesian(
            new Cesium.Cartographic2(-75.0, 40.0)), 300000.0));
    primitives.add(circle);

    // Outline circle
    var outline = new Cesium.Polyline();
    Sandcastle.declare(outline);
	outline.setPositions(Cesium.Shapes.computeCircleBoundary(
        ellipsoid, ellipsoid.cartographicDegreesToCartesian(
            new Cesium.Cartographic2(-82.0, 37.0)), 300000.0));
    primitives.add(outline);
    
    // Apply a material to a filled circle
    var circle2 = new Cesium.Polygon();
    Sandcastle.declare(circle2);
    circle2.setPositions(Cesium.Shapes.computeCircleBoundary(
        ellipsoid, ellipsoid.cartographicDegreesToCartesian(
            new Cesium.Cartographic2(-90.0, 35.0)), 400000.0));
    // Any polygon-compatible material can be used
    circle2.material = new Cesium.TieDyeMaterial();
    primitives.add(circle2);
    
    // Fill an ellipse
    var ellipse = new Cesium.Polygon();
    Sandcastle.declare(ellipse);
    ellipse.setPositions(Cesium.Shapes.computeEllipseBoundary(
        ellipsoid, ellipsoid.cartographicDegreesToCartesian(
            new Cesium.Cartographic2(-78.0, 32.5)), 500000.0,
                250000.0, Cesium.Math.toRadians(60)));
    primitives.add(ellipse);

    ///////////////////////////////////////////////////////////////////////////

    scene.setAnimation(function() {
        scene.setSunPosition(Cesium.SunPosition.compute().position);

        // INSERT CODE HERE to update primitives based on changes to animation time, camera parameters, etc.
    });

    (function tick() {
        scene.render();
        Cesium.requestAnimationFrame(tick);
    }());

    ///////////////////////////////////////////////////////////////////////////
    // Example pick handler

    var handler = new Cesium.EventHandler(canvas);
    var mousedOverObject;
    var originalColor;
    var originalMaterial;
    var selectedColor = new Cesium.Color(0.0, 1.0, 0.0);
    var selectedMaterial = new Cesium.ColorMaterial();
    selectedMaterial.color = selectedColor;

    function onObjectHover(obj) {
        if (typeof obj.material !== 'undefined') {
            originalMaterial = obj.material;
            obj.material = selectedMaterial;
        } else {
            originalColor = obj.color;
            obj.color = selectedColor;
        }
    }

    function onObjectExit(obj) {
        if (typeof obj.material !== 'undefined') {
            obj.material = originalMaterial;
        } else {
            obj.color = originalColor;
        }
    }

    handler.setMouseAction(function (movement) {
        var pickedObject = scene.pick(movement.endPosition);
        if (mousedOverObject !== pickedObject) {
            if (typeof mousedOverObject !== 'undefined') {
                onObjectExit(mousedOverObject);
            }
            mousedOverObject = pickedObject;
            if (typeof mousedOverObject !== 'undefined') {
                onObjectHover(mousedOverObject);
            }
            Sandcastle.highlight(mousedOverObject);
        }
    }, Cesium.MouseEventType.MOVE);

    // Prevent right-click from opening a context menu.
    canvas.oncontextmenu = function() {
        return false;
    };

    ///////////////////////////////////////////////////////////////////////////
    // Example resize handler

    var onResize = function () {
        var width = canvas.clientWidth;
        var height = canvas.clientHeight;

        if (canvas.width === width && canvas.height === height) {
            return;
        }

        canvas.width = width;
        canvas.height = height;

        scene.getContext().setViewport({
            x: 0,
            y: 0,
            width: width,
            height: height
        });

        scene.getCamera().frustum.aspectRatio = width / height;
    };
    window.addEventListener('resize', onResize, false);
    onResize();
});

</script>
</body>
</html>
